(()=>{var l=(t,n)=>()=>(t&&(n=t(t=0)),n);var T=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports);var o=(t,n,e)=>new Promise((s,i)=>{var c=a=>{try{r(e.next(a))}catch(m){i(m)}},p=a=>{try{r(e.throw(a))}catch(m){i(m)}},r=a=>a.done?s(a.value):Promise.resolve(a.value).then(c,p);r((e=e.apply(t,n)).next())});var u,h=l(()=>{u=()=>o(void 0,null,function*(){try{yield fetch("/test/run/demo")}catch(t){console.log(t.message)}})});var d,v=l(()=>{d=()=>o(void 0,null,function*(){try{let n=yield(yield fetch("test/results/snapshots")).json();return JSON.parse(n)}catch(t){console.log(t.message)}})});var M,E,S=l(()=>{v();M=(t,n)=>{let e=document.createElement("li");e.className="test-result-snapshot-child";let s=document.createElement("p");s.className="test-result-snapshot-child-text",s.innerText=n;let i=document.createElement("img");return i.className="test-result-snapshot-child-image",i.src=t,e.appendChild(s),e.appendChild(i),e},E=()=>o(void 0,null,function*(){let t=document.createElement("ul");t.className="test-result-snapshots-list";let n=yield d();for(let e of n){let s=M(e.ref,e.title);t.appendChild(s)}return t})});var g,L,f=l(()=>{h();S();g=()=>{let t=document.querySelector("#test-run-tests-btn");t.className="primary-btn",t.addEventListener("click",n=>o(void 0,null,function*(){return yield u()}))},L=()=>{let t=document.querySelector("#test-show-snapshots-btn");t.className="primary-btn",t.addEventListener("click",n=>o(void 0,null,function*(){let e=document.querySelector("#selenium-snapshots"),s=yield E();e.firstChild&&e.removeChild(e.firstChild),e.appendChild(s)}))}});var H=T(y=>{f();w(()=>o(y,null,function*(){g(),L()}));function w(t){let n=(c,p)=>{let r=new EventSource(c);return r.addEventListener("open",p),r},e=c=>{let p="onvisibilitychange"in window.document?"visibilitychange":"pagehide";window.addEventListener(p,r=>{c.close()})},s=()=>{e(n("/update_snapshots",()=>console.log("received!")))},i=()=>{};s(),t({}).then(()=>i())}});H();})();
